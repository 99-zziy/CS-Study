# 데이터 모델링 개념

## Entity

### 개념

- 사람, 장소, 물건, 사건, 개념 등과 같은 명사에 해당된다.

- 업무상 관리가 필요한 것에 해당된다.

- 저장 되기 위한 어떤 것(Thing)에 해당된다.

<br>

### 특징
- 반드시 엔터티가 사용되는 곳의 업무에서 필요하며 관리하고자 하는 정보

- 엔터티가 포함하는 인스턴스에 대해 유일한 식별자로 식별이 가능해야 함

- 엔터티는 지속적으로 존재하는 두개 이상의 인스턴스들의 조합이어야 함

- 엔터티는 반드시 속성을 지녀야 함

- 엔터티는 업무 프로세스에 의해서 이용되어야 함

- 엔터티는 다른 엔터티와 최소 한 개 이상의 관계가 있어야 함

<br>

### 분류
- 실체유형에 따른 분류

  - 유형 엔터티(Tangible Entity)

    물리적인 형태가 존재하는 엔터티이며 안정적이고 지속적으로 활용되는 엔터티이다.

  - 개념 엔터티(Conceptual Entity)

    물리적인 형태는 존재하지 않고 관리해야 할 개념적인 정보로 구분이 되는 엔터티이다.

  - 사건 엔터티(Event Entity)

    업무를 수행함에 따라 발생되는 엔터티이다.

<br>

- 발생 시점에 따른 분류
  
  - 기본/키 엔터티(Fundamental/Key Entity)

    해당 업무에 원래 존재하는 정보로 다른 엔터티와의 관계에 의해 발생 또는 생성되지 않고 독립적으로 존재하는 엔터티이다. 이는 독립적으로 생성이 가능하며 다른 엔터티의 부모역할을 한다.

  - 중심 엔터티(Main Entity)

    기본 엔터티로 부터 발생되며 업무에 있어서 중심적인 역할을 한다. 일반적으로 데이터 양이 많으며 다른 엔터티와의 관계를 통해 행위 엔터티를 생성한다.

  - 행위 엔터티(Active Entity)

    두 개이상의 부모엔터티로 부터 주로 발생되고, 자주 엔터티의 내용이 바뀌거나 데이터양이 증감한다. 분석초기 단계보다는 상세 설계단계나 프로세스와 상관모델링을 진행하면서 도출될 수 있다.

<br>

### 명명
- 가능하면 현업업무에서 사용하는 용어를 사용한다.

- 가능하면 약어를 사용하지 않는다.

- 단수 명사를 사용한다.

- 모든 엔터티를 통틀어서 유일한 이름을 가져야 한다.

- 엔터티의 생성의미대로 이름을 부여한다.

<br>
<br>


## 속성

<br>

### 정의
인스턴스로 관리하고자 하는 의미상 더 이상 분리되지 않는 최소의 데이터 단위
즉, 속성이란 의미상 더 이상 분리되지 않으며, 엔터티를 설명하는 요소이며 인스턴스의 구성요소이다.


<br>

### 특징

- 엔터티와 마찬가지로 반드시 해당 업무에서 필요하고 관리하고자 하는 정보이어야 한다.
- 다양하게 존재하는 인스턴스들에 대해 유일하게 구별할 수 있는 주식별자를 통해서 식별될 수 있어야 한다.
- 하나의 속성에는 단 한개의 값만을 가진다.


<br>

### 엔터티, 인스턴스, 속성, 속성값의 관계

- 엔터티에는 두 개 이상의 인스턴스가 존재한다. 그리고 각각의 엔터티에는 고유의 성격을 표현하는 속성정보를 두 개 이상 갖는다. 

  분석단계에서는 엔터티 내에 존재하는 여러 개의 인스턴스가 가지는 동일한 성격을 파악하여 이에 이름을 부여하여 엔터티의 속성으로 결정하는 작업이 필요하다. 또한 하나의 속성은 하나의 인스턴스에만 존재할 수 있으며, 속성은 스스로가 또 다른 속성을 가질 수 없고 속성에 대해 어떠한 관계로 기술할 수 없다. 그리고 각 인스턴스는 하나의 속성에 대해 하나의 속성 값만 가질 수 있다.


- 한 개의 엔터티는 두 개 이상의 인스턴스의 집합이다.

- 한 개의 엔터티는 두 개 이상의 속성을 가진다.

- 한 개의 속성은 한 개의 속성 값을 가진다.

<br>

### 분류

### 특성에 따른 분류

- 기본 속성(Basic Attribute)

  업무 분석을 통해 바로 정의한 속성을 기본속성이라고 한다. 엔터티에 있어서 가장 일반적이고 많은 속성을 차지한다. 하지만 코드성 데이터, 엔터티를 식별하기 위해 부여된 일련번호, 그리고 다른 속성을 계산하거나 영향을 받아 생성된 속성등은 기본속성이 아니다.


- 설계 속성(Designed Attribute)

  업무상 필요한 데이터 이외에 데이터 모델링을 위해, 업무를 규칙화하기 위해 새로 만들어지거나 변형된 속성을 설계 속성이라고 한다. 일반적으로 코드성 속성은 기존의 속성을 업무상 필요에 의해 변형하여 만든 설계 속성이다. 또한 일련번호와 같은 속성 또한 단일한 식별자를 부여하기 위해 모델 상에서 새롭게 정의하는 설계속성이다.

- 파생 속성(Derived Attribute)

  다른 속성에 영향을 받아 발생하는 속성은 파생 속성이다. 일반적으로 계산된 값들이 이에 해당된다. 파생 속성은 가급적 적게 정의하는 것이 좋다.

<br>

### 엔터티 구성방식에 따른 분류

- PK(Primary Key) 속성

  엔터티를 유일하게 구분할 수 있는 속성을 PK 속성이라고 한다.

- FK(Foreign Key) 속성

  다른 엔터티와의 관계에 있어서 포함된 속성을 FK 속성이라고 한다.

- 일반 속성
  엔터티에 포함되어 있고, PK 또는 FK에 포함되지 않는 속성을 일반  속성이라고 한다.

<br>

### 세부 의미 유무에 따른 분류

- 단순 속성(Simple Attibute)

  나이, 성별과 같은 데이터는 더 이상 다른 속성들로 구성될 수 없는 단순한 속성이므로 단순 속성이라고 한다.

- 복합 속성(Composite Attribute)

  주소 속성에 대해서는 시, 구, 동, 번지와 같이 여러 세부 속성들로 구성될 수 있는데 이때 주소 속성과 같은 것들을 복합 속성이라고 한다.

<br>

### 명명
- 해당 업무에서 사용하는 이름을 부여한다.

- 서술식 속성명은 사용하지 않는다.

- 약어사용은 가급적 제한한다.

- 전체 데이터 모델에서 유일성을 확보하는 것이 좋다.

<br>

### 도메인(Domain)

각 속성은 무한정적인 값을 갖는 것이 아니라 그 범위가 지정된다. 이 때 속성의 값이 가질 수 있는 범위를 그 속성의 도메인이라고 한다. 따라서 속성 값이 가질 수 있는 데이터 타입과 크기 그리고 추가적인 제약사항이라고 생각할 수 있다.

<br>
<br>

### 관계 (Relationship)
엔터티의 인스턴스 간 논리적인 연관성이라고 생각할 수 있고 보다 구체적으로는, 존재의 형태로서나 행위로서 서로에게 연관성이 부여된 상태라고 할 수 있다. 

이러한 관계는 엔터티와 엔터티 간 연관성을 표현하기 때문에 특정 엔터티의 정의에 따라 영향을 받기도 하고, 속성 정의 및 관계 정의에 따라서도 다양하게 변경될 수 있다.

<br>

### 분류

### 연결 목적에 따른 분류
- 존재에 의한 관계
  '학부/과' 라는 엔터티와 '학생'이라는 엔터티가 존재한다고 가정하자. 이때 '학생' 엔터티의 특정 인스턴스는 언제든지 '학부/과' 엔터티의 특정 인스턴스에 속해있을 것이다. 이는 어떠한 이벤트나 액션, 행위에 의한 것이 아니라 단순히 소속되어 있기 때문에 나타나는 관계이다. 이러한 경우를 존재에 의한 관계라고 한다.



- 행위에 의한 관계

  '손님'이라는 엔터티와 '주문'이라는 엔터티가 있다고 가정해보자. 각 엔터티의 특정 인스턴스 끼리는 관계가 발생하기 위해 '손님'이라는 엔터티의 인스턴스가 특정 행위를 해야한다. 이러한 관계를 행위에 의한 관계라고 이야기를 한다.

<br>

### 표기법
- 관계명
  엔터티가 관계에 참여하는 형태를 지칭한다. 관계는 2개의 엔터티에 의해 발생되므로, 하나의 관계는 2개의 관계명을 가지게 되며, 각각의 관게명에 따라서 하나의 관계가 두가지 관점으로 표현될 수 있다.

  이때, 엔터티에서 관계가 시작되는 쪽을 관계시작점이라고 부르고 관계가 끝나는 쪽을 관계끝점이라고 한다. 관계명을 지을 때는 아래와 같은 명명규칙을 따른다.
  - 현재형으로 표현한다. 예를 들어, '주문을 했다', '신청할 것이다'라는 식의 표현은 사용하지 않는다. 대신 '주문 한다', '신청 한다' 와 같이 표현한다.


- 관계차수(Cardinality)
  관계차수란, 관계에 참여하는 두 엔터티의 참여자수를 이야기한다. 일반적으로 1:1, 1:M, M:N으로 나타낸다. 즉 관계에 하나만 참여하는지, 아니면 그 이상(2개 이상)이 관계에 참여하는지를 파악하는 것이 중요하다.

  <br>


  ![](https://images.velog.io/images/hellojihyoung/post/8bed8e6c-8cf0-4100-a5b3-e040aabc3b27/99FA24405E1EC3C62A.png)

  <br>

- 관계선택사양(Optionality)

  관계선택사양이라는 것은 엔터티가 항상 관계에 참여하는지, 아니면 선택적으로 관계에 참여할 수 있는 것인지를 의미한다. 이때 항상 관계에 참여하는 것을 필수 참여(Mandatory Membership)이고 선택적으로 관계에 참여하는 것을 선택 참여(Optional Membership)이라고 한다.



<br>

### 체크사항

- 두 개의 엔터티 사이에 관심있는 연관규칙이 존재하는가?

- 두 개의 엔터티 사이에 정보의 조합이 발생되는가?

- 업무기술서, 장표에 관계연결에 대한 규칙이 서술되어 있는가?

- 업무기술서, 장표에 관계연결을 가능하게 하는 동사(Verb)가 있는가?

<br>

### 식별자

### 정의
우리는 앞에서 인스턴스들의 집합(조합)이 엔터티라고 했다. 그럼, 엔터티내에서 특정 인스턴스를 구별하는 방법은 무엇일까? 이를 위해서 식별자가 존재한다. 즉, 여러 개의 인스턴스를 담고 있는 엔터티에서 인스턴스를 구별하기 위한, 즉 엔터티를 대표하는 속성을 의미하며 하나의 엔터티에서는 반드시 하나의 유일한 식별자가 존재해야 한다. 

데이터베이스 공부를 했던 사람이라면 키(Key)와 식별자를 동일하게 생각할 수 있는데, 식별자는 업무적으로 구분이 되는 정보이므로 논리 데이터 모델링 단계에서 사용하는 용어이며, 키(Key)는 데이터베이스에서 테이블에 접근을 하기 위한 것으로 물리 데이터 모델링 단계에서 사용하는 것으로 약간의 차이가 존재한다.

<br>

### 종류
  - 대표성 유무에 따른 분류
  
    - 주식별자(Primary Identifier)

      엔터티 내에서 각 어커런스를 구분할 수 있는 구분자이며, 타 엔터티와 참조관계를 연결할 수 있는 식별자



    - 보조식별자(Alternate Identifier)

      엔터티 내에서 칵 어커런스를 구분할 수 있는 구분자이지만 대표성을 가지지 못해 참조관계 연결을 못함


<br>

### 특징
- 유일성

  주식별자에 의해 엔터티내에 모든 인스턴스들을 유일하게 구분할 수 있어야 함

- 최소성

  주식별자를 구성하는 속성의 수는 유일성을 만족하는 최소의 수가 되어야 함

- 불변성

  주식별자가 한 번 특정 엔터티에 지정되면 그 식별자의 값은 변하지 않아야 함

- 존재성

  주식별자가 지정되면 반드시 데이터 값이 존재 해야함(Null값 안됨)

<br>

- 스스로 생성되었는지에 따른 분류

  - 내부식별자
  
    엔터티 내부에서 스스로 만들어지는 식별자
  - 외부식별자(Foreign Identifier)
  
    타 엔터티와의 관계를 통해 타 엔터티로부터 받아오는 식별자


- 단일 속성인지에 따른 분류

  - 단일식별자(Single Identifier)

    하나의 속성으로 구성된 식별자

  - 복합식별자(Composit Identifier)

    둘 이상의 속성으로 구성된 식별자
  
<br>

- 업무적 의미가 있는가에 따른 분류

  - 본질식별자

    업무에 의해 만들어지는 식별자


  - 인조식별자

    업무적으로 만들어지지는 않지만 원조식별자가 복잡한 구성을 가지고 있기 때문에 인위적으로 만든 식별자

<br>


<br>
출처 : https://doorbw.tistory.com/228